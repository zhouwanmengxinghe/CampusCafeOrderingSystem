<?xml version="1.0" encoding="UTF-8"?>
<svg width="1800" height="1400" xmlns="http://www.w3.org/2000/svg">
  <defs>
    <style>
      .entity { fill: #f8f9fa; stroke: #2c3e50; stroke-width: 2; rx: 8; }
      .entity-title { fill: #2c3e50; font-family: Arial, sans-serif; font-size: 14px; font-weight: bold; text-anchor: middle; }
      .attribute { fill: #34495e; font-family: Arial, sans-serif; font-size: 11px; }
      .pk { fill: #e74c3c; font-family: Arial, sans-serif; font-size: 11px; font-weight: bold; }
      .fk { fill: #3498db; font-family: Arial, sans-serif; font-size: 11px; font-style: italic; }
      .relationship { stroke: #7f8c8d; stroke-width: 2; fill: none; }
      .relationship-label { fill: #7f8c8d; font-family: Arial, sans-serif; font-size: 10px; text-anchor: middle; }
      .title { fill: #2c3e50; font-family: Arial, sans-serif; font-size: 20px; font-weight: bold; text-anchor: middle; }
      .legend { fill: #ecf0f1; stroke: #95a5a6; stroke-width: 1; }
      .legend-text { fill: #2c3e50; font-family: Arial, sans-serif; font-size: 12px; }
    </style>
  </defs>
  
  <!-- Title -->
  <text x="900" y="30" class="title">Campus Cafe Ordering System - Complete Database ER Diagram</text>
  
  <!-- Core User Management -->
  <!-- Users (ASP.NET Identity) -->
  <rect x="50" y="70" width="200" height="280" class="entity"/>
  <text x="150" y="90" class="entity-title">Users (AspNetUsers)</text>
  <text x="60" y="110" class="pk">Id (PK)</text>
  <text x="60" y="125" class="attribute">UserName</text>
  <text x="60" y="140" class="attribute">Email</text>
  <text x="60" y="155" class="attribute">PasswordHash</text>
  <text x="60" y="170" class="attribute">PhoneNumber</text>
  <text x="60" y="185" class="attribute">EmailConfirmed</text>
  <text x="60" y="200" class="attribute">LockoutEnd</text>
  <text x="60" y="215" class="attribute">AccessFailedCount</text>
  <text x="60" y="230" class="attribute">TwoFactorEnabled</text>
  <text x="60" y="245" class="attribute">SecurityStamp</text>
  <text x="60" y="260" class="attribute">FirstName</text>
  <text x="60" y="275" class="attribute">LastName</text>
  <text x="60" y="290" class="attribute">StudentId</text>
  <text x="60" y="305" class="attribute">UserType</text>
  <text x="60" y="320" class="attribute">CreatedDate</text>
  <text x="60" y="335" class="attribute">IsActive</text>
  
  <!-- UserProfiles -->
  <rect x="300" y="70" width="180" height="200" class="entity"/>
  <text x="390" y="90" class="entity-title">UserProfiles</text>
  <text x="310" y="110" class="pk">Id (PK)</text>
  <text x="310" y="125" class="fk">UserId (FK)</text>
  <text x="310" y="140" class="attribute">Avatar</text>
  <text x="310" y="155" class="attribute">DateOfBirth</text>
  <text x="310" y="170" class="attribute">Gender</text>
  <text x="310" y="185" class="attribute">Address</text>
  <text x="310" y="200" class="attribute">DormitoryBuilding</text>
  <text x="310" y="215" class="attribute">RoomNumber</text>
  <text x="310" y="230" class="attribute">EmergencyContact</text>
  <text x="310" y="245" class="attribute">CreatedDate</text>
  <text x="310" y="260" class="attribute">UpdatedDate</text>
  
  <!-- Vendor Management -->
  <!-- Vendors -->
  <rect x="530" y="70" width="180" height="240" class="entity"/>
  <text x="620" y="90" class="entity-title">Vendors</text>
  <text x="540" y="110" class="pk">Id (PK)</text>
  <text x="540" y="125" class="fk">UserId (FK)</text>
  <text x="540" y="140" class="attribute">BusinessName</text>
  <text x="540" y="155" class="attribute">BusinessLicense</text>
  <text x="540" y="170" class="attribute">ContactPhone</text>
  <text x="540" y="185" class="attribute">BusinessAddress</text>
  <text x="540" y="200" class="attribute">BusinessHours</text>
  <text x="540" y="215" class="attribute">DeliveryRadius</text>
  <text x="540" y="230" class="attribute">DeliveryFee</text>
  <text x="540" y="245" class="attribute">MinOrderAmount</text>
  <text x="540" y="260" class="attribute">IsActive</text>
  <text x="540" y="275" class="attribute">Rating</text>
  <text x="540" y="290" class="attribute">CreatedDate</text>
  <text x="540" y="305" class="attribute">UpdatedDate</text>
  
  <!-- Categories -->
  <rect x="760" y="70" width="180" height="200" class="entity"/>
  <text x="850" y="90" class="entity-title">Categories</text>
  <text x="770" y="110" class="pk">Id (PK)</text>
  <text x="770" y="125" class="attribute">Name</text>
  <text x="770" y="140" class="attribute">Description</text>
  <text x="770" y="155" class="attribute">ImageUrl</text>
  <text x="770" y="170" class="attribute">SortOrder</text>
  <text x="770" y="185" class="attribute">IsActive</text>
  <text x="770" y="200" class="attribute">ParentCategoryId</text>
  <text x="770" y="215" class="attribute">CreatedDate</text>
  <text x="770" y="230" class="attribute">UpdatedDate</text>
  <text x="770" y="245" class="attribute">Icon</text>
  <text x="770" y="260" class="attribute">Color</text>
  
  <!-- Menu Management -->
  <!-- MenuItems -->
  <rect x="990" y="70" width="180" height="280" class="entity"/>
  <text x="1080" y="90" class="entity-title">MenuItems</text>
  <text x="1000" y="110" class="pk">Id (PK)</text>
  <text x="1000" y="125" class="fk">VendorId (FK)</text>
  <text x="1000" y="140" class="fk">CategoryId (FK)</text>
  <text x="1000" y="155" class="attribute">Name</text>
  <text x="1000" y="170" class="attribute">Description</text>
  <text x="1000" y="185" class="attribute">Price</text>
  <text x="1000" y="200" class="attribute">DiscountPrice</text>
  <text x="1000" y="215" class="attribute">ImageUrl</text>
  <text x="1000" y="230" class="attribute">IsAvailable</text>
  <text x="1000" y="245" class="attribute">PreparationTime</text>
  <text x="1000" y="260" class="attribute">Ingredients</text>
  <text x="1000" y="275" class="attribute">NutritionalInfo</text>
  <text x="1000" y="290" class="attribute">Allergens</text>
  <text x="1000" y="305" class="attribute">Tags</text>
  <text x="1000" y="320" class="attribute">CreatedDate</text>
  <text x="1000" y="335" class="attribute">UpdatedDate</text>
  <text x="1000" y="350" class="attribute">IsDeleted</text>
  
  <!-- Shopping & Order Management -->
  <!-- ShoppingCart -->
  <rect x="1220" y="70" width="180" height="180" class="entity"/>
  <text x="1310" y="90" class="entity-title">ShoppingCart</text>
  <text x="1230" y="110" class="pk">Id (PK)</text>
  <text x="1230" y="125" class="fk">UserId (FK)</text>
  <text x="1230" y="140" class="fk">MenuItemId (FK)</text>
  <text x="1230" y="155" class="attribute">Quantity</text>
  <text x="1230" y="170" class="attribute">Customizations</text>
  <text x="1230" y="185" class="attribute">SpecialInstructions</text>
  <text x="1230" y="200" class="attribute">AddedDate</text>
  <text x="1230" y="215" class="attribute">UpdatedDate</text>
  <text x="1230" y="230" class="attribute">SessionId</text>
  <text x="1230" y="245" class="attribute">IsActive</text>
  
  <!-- Orders -->
  <rect x="50" y="400" width="200" height="320" class="entity"/>
  <text x="150" y="420" class="entity-title">Orders</text>
  <text x="60" y="440" class="pk">Id (PK)</text>
  <text x="60" y="455" class="attribute">OrderNumber</text>
  <text x="60" y="470" class="fk">UserId (FK)</text>
  <text x="60" y="485" class="fk">VendorId (FK)</text>
  <text x="60" y="500" class="attribute">TotalAmount</text>
  <text x="60" y="515" class="attribute">DeliveryFee</text>
  <text x="60" y="530" class="attribute">DiscountAmount</text>
  <text x="60" y="545" class="attribute">FinalAmount</text>
  <text x="60" y="560" class="attribute">Status</text>
  <text x="60" y="575" class="attribute">OrderDate</text>
  <text x="60" y="590" class="attribute">DeliveryType</text>
  <text x="60" y="605" class="attribute">DeliveryAddress</text>
  <text x="60" y="620" class="attribute">DeliveryTime</text>
  <text x="60" y="635" class="attribute">EstimatedDelivery</text>
  <text x="60" y="650" class="attribute">ActualDelivery</text>
  <text x="60" y="665" class="attribute">SpecialInstructions</text>
  <text x="60" y="680" class="attribute">PaymentMethod</text>
  <text x="60" y="695" class="attribute">PaymentStatus</text>
  <text x="60" y="710" class="attribute">CancelReason</text>
  
  <!-- OrderItems -->
  <rect x="300" y="400" width="180" height="220" class="entity"/>
  <text x="390" y="420" class="entity-title">OrderItems</text>
  <text x="310" y="440" class="pk">Id (PK)</text>
  <text x="310" y="455" class="fk">OrderId (FK)</text>
  <text x="310" y="470" class="fk">MenuItemId (FK)</text>
  <text x="310" y="485" class="attribute">MenuItemName</text>
  <text x="310" y="500" class="attribute">Quantity</text>
  <text x="310" y="515" class="attribute">UnitPrice</text>
  <text x="310" y="530" class="attribute">TotalPrice</text>
  <text x="310" y="545" class="attribute">SpecialInstructions</text>
  <text x="310" y="560" class="attribute">Size</text>
  <text x="310" y="575" class="attribute">Customizations</text>
  <text x="310" y="590" class="attribute">Status</text>
  <text x="310" y="605" class="attribute">PreparationStatus</text>
  <text x="310" y="620" class="attribute">Notes</text>
  
  <!-- Payment Management -->
  <!-- Payments -->
  <rect x="530" y="400" width="180" height="240" class="entity"/>
  <text x="620" y="420" class="entity-title">Payments</text>
  <text x="540" y="440" class="pk">Id (PK)</text>
  <text x="540" y="455" class="fk">OrderId (FK)</text>
  <text x="540" y="470" class="fk">UserId (FK)</text>
  <text x="540" y="485" class="attribute">Amount</text>
  <text x="540" y="500" class="attribute">PaymentMethod</text>
  <text x="540" y="515" class="attribute">TransactionId</text>
  <text x="540" y="530" class="attribute">Status</text>
  <text x="540" y="545" class="attribute">PaymentDate</text>
  <text x="540" y="560" class="attribute">RefundAmount</text>
  <text x="540" y="575" class="attribute">RefundDate</text>
  <text x="540" y="590" class="attribute">RefundReason</text>
  <text x="540" y="605" class="attribute">ProcessorResponse</text>
  <text x="540" y="620" class="attribute">Notes</text>
  <text x="540" y="635" class="attribute">CreatedDate</text>
  
  <!-- User Credit System -->
  <!-- UserCredits -->
  <rect x="760" y="400" width="180" height="180" class="entity"/>
  <text x="850" y="420" class="entity-title">UserCredits</text>
  <text x="770" y="440" class="pk">Id (PK)</text>
  <text x="770" y="455" class="fk">UserId (FK)</text>
  <text x="770" y="470" class="attribute">Balance</text>
  <text x="770" y="485" class="attribute">TotalEarned</text>
  <text x="770" y="500" class="attribute">TotalSpent</text>
  <text x="770" y="515" class="attribute">LastUpdated</text>
  <text x="770" y="530" class="attribute">CreatedDate</text>
  <text x="770" y="545" class="attribute">IsActive</text>
  <text x="770" y="560" class="attribute">Version</text>
  
  <!-- CreditHistory -->
  <rect x="990" y="400" width="180" height="220" class="entity"/>
  <text x="1080" y="420" class="entity-title">CreditHistory</text>
  <text x="1000" y="440" class="pk">Id (PK)</text>
  <text x="1000" y="455" class="fk">UserCreditId (FK)</text>
  <text x="1000" y="470" class="fk">OrderId (FK)</text>
  <text x="1000" y="485" class="attribute">Amount</text>
  <text x="1000" y="500" class="attribute">Type</text>
  <text x="1000" y="515" class="attribute">Description</text>
  <text x="1000" y="530" class="attribute">BalanceBefore</text>
  <text x="1000" y="545" class="attribute">BalanceAfter</text>
  <text x="1000" y="560" class="attribute">TransactionDate</text>
  <text x="1000" y="575" class="attribute">ExpiryDate</text>
  <text x="1000" y="590" class="attribute">IsExpired</text>
  <text x="1000" y="605" class="attribute">CreatedDate</text>
  
  <!-- Review & Feedback System -->
  <!-- Reviews -->
  <rect x="1220" y="400" width="180" height="240" class="entity"/>
  <text x="1310" y="420" class="entity-title">Reviews</text>
  <text x="1230" y="440" class="pk">Id (PK)</text>
  <text x="1230" y="455" class="fk">UserId (FK)</text>
  <text x="1230" y="470" class="fk">OrderId (FK)</text>
  <text x="1230" y="485" class="fk">VendorId (FK)</text>
  <text x="1230" y="500" class="fk">MenuItemId (FK)</text>
  <text x="1230" y="515" class="attribute">Rating</text>
  <text x="1230" y="530" class="attribute">Comment</text>
  <text x="1230" y="545" class="attribute">Images</text>
  <text x="1230" y="560" class="attribute">ReviewDate</text>
  <text x="1230" y="575" class="attribute">IsAnonymous</text>
  <text x="1230" y="590" class="attribute">Status</text>
  <text x="1230" y="605" class="attribute">MerchantReply</text>
  <text x="1230" y="620" class="attribute">RepliedAt</text>
  <text x="1230" y="635" class="attribute">CreatedAt</text>
  
  <!-- Feedback -->
  <rect x="50" y="760" width="180" height="220" class="entity"/>
  <text x="140" y="780" class="entity-title">Feedback</text>
  <text x="60" y="800" class="pk">Id (PK)</text>
  <text x="60" y="815" class="fk">UserId (FK)</text>
  <text x="60" y="830" class="attribute">UserEmail</text>
  <text x="60" y="845" class="attribute">Subject</text>
  <text x="60" y="860" class="attribute">Message</text>
  <text x="60" y="875" class="attribute">Category</text>
  <text x="60" y="890" class="attribute">Status</text>
  <text x="60" y="905" class="attribute">Priority</text>
  <text x="60" y="920" class="attribute">Response</text>
  <text x="60" y="935" class="attribute">RespondedAt</text>
  <text x="60" y="950" class="attribute">CreatedAt</text>
  <text x="60" y="965" class="attribute">UpdatedAt</text>
  
  <!-- Notification System -->
  <!-- Notifications -->
  <rect x="280" y="760" width="180" height="200" class="entity"/>
  <text x="370" y="780" class="entity-title">Notifications</text>
  <text x="290" y="800" class="pk">Id (PK)</text>
  <text x="290" y="815" class="fk">UserId (FK)</text>
  <text x="290" y="830" class="attribute">Title</text>
  <text x="290" y="845" class="attribute">Message</text>
  <text x="290" y="860" class="attribute">Type</text>
  <text x="290" y="875" class="attribute">IsRead</text>
  <text x="290" y="890" class="attribute">CreatedDate</text>
  <text x="290" y="905" class="attribute">ReadDate</text>
  <text x="290" y="920" class="attribute">RelatedEntityId</text>
  <text x="290" y="935" class="attribute">RelatedEntityType</text>
  <text x="290" y="950" class="attribute">Priority</text>
  
  <!-- User Preferences -->
  <!-- UserPreferences -->
  <rect x="510" y="760" width="180" height="220" class="entity"/>
  <text x="600" y="780" class="entity-title">UserPreferences</text>
  <text x="520" y="800" class="pk">Id (PK)</text>
  <text x="520" y="815" class="fk">UserId (FK)</text>
  <text x="520" y="830" class="attribute">EmailNotifications</text>
  <text x="520" y="845" class="attribute">SmsNotifications</text>
  <text x="520" y="860" class="attribute">OrderStatusNotifications</text>
  <text x="520" y="875" class="attribute">PromotionNotifications</text>
  <text x="520" y="890" class="attribute">DietaryRestrictions</text>
  <text x="520" y="905" class="attribute">PreferredLanguage</text>
  <text x="520" y="920" class="attribute">Theme</text>
  <text x="520" y="935" class="attribute">DefaultPaymentMethod</text>
  <text x="520" y="950" class="attribute">DefaultDeliveryAddress</text>
  <text x="520" y="965" class="attribute">CreatedAt</text>
  
  <!-- Business Extensions -->
  <!-- CateringApplications -->
  <rect x="740" y="760" width="180" height="260" class="entity"/>
  <text x="830" y="780" class="entity-title">CateringApplications</text>
  <text x="750" y="800" class="pk">Id (PK)</text>
  <text x="750" y="815" class="fk">UserId (FK)</text>
  <text x="750" y="830" class="attribute">ContactName</text>
  <text x="750" y="845" class="attribute">ContactPhone</text>
  <text x="750" y="860" class="attribute">EventDate</text>
  <text x="750" y="875" class="attribute">StartTime</text>
  <text x="750" y="890" class="attribute">EndTime</text>
  <text x="750" y="905" class="attribute">NumberOfPeople</text>
  <text x="750" y="920" class="attribute">ServiceType</text>
  <text x="750" y="935" class="attribute">BudgetPerPerson</text>
  <text x="750" y="950" class="attribute">MenuStyle</text>
  <text x="750" y="965" class="attribute">DietaryCsv</text>
  <text x="750" y="980" class="attribute">SpecialRequirements</text>
  <text x="750" y="995" class="attribute">Status</text>
  <text x="750" y="1010" class="attribute">CreatedDate</text>
  
  <!-- Promotions & Discounts -->
  <!-- Promotions -->
  <rect x="970" y="760" width="180" height="220" class="entity"/>
  <text x="1060" y="780" class="entity-title">Promotions</text>
  <text x="980" y="800" class="pk">Id (PK)</text>
  <text x="980" y="815" class="fk">VendorId (FK)</text>
  <text x="980" y="830" class="attribute">Title</text>
  <text x="980" y="845" class="attribute">Description</text>
  <text x="980" y="860" class="attribute">DiscountType</text>
  <text x="980" y="875" class="attribute">DiscountValue</text>
  <text x="980" y="890" class="attribute">MinOrderAmount</text>
  <text x="980" y="905" class="attribute">StartDate</text>
  <text x="980" y="920" class="attribute">EndDate</text>
  <text x="980" y="935" class="attribute">IsActive</text>
  <text x="980" y="950" class="attribute">UsageLimit</text>
  <text x="980" y="965" class="attribute">UsedCount</text>
  
  <!-- Delivery Management -->
  <!-- DeliveryPersons -->
  <rect x="1200" y="760" width="180" height="200" class="entity"/>
  <text x="1290" y="780" class="entity-title">DeliveryPersons</text>
  <text x="1210" y="800" class="pk">Id (PK)</text>
  <text x="1210" y="815" class="fk">UserId (FK)</text>
  <text x="1210" y="830" class="attribute">LicenseNumber</text>
  <text x="1210" y="845" class="attribute">VehicleType</text>
  <text x="1210" y="860" class="attribute">VehicleNumber</text>
  <text x="1210" y="875" class="attribute">IsAvailable</text>
  <text x="1210" y="890" class="attribute">CurrentLocation</text>
  <text x="1210" y="905" class="attribute">Rating</text>
  <text x="1210" y="920" class="attribute">CreatedDate</text>
  <text x="1210" y="935" class="attribute">UpdatedDate</text>
  <text x="1210" y="950" class="attribute">IsActive</text>
  
  <!-- Delivery Assignments -->
  <rect x="1430" y="760" width="180" height="180" class="entity"/>
  <text x="1520" y="780" class="entity-title">DeliveryAssignments</text>
  <text x="1440" y="800" class="pk">Id (PK)</text>
  <text x="1440" y="815" class="fk">OrderId (FK)</text>
  <text x="1440" y="830" class="fk">DeliveryPersonId (FK)</text>
  <text x="1440" y="845" class="attribute">AssignedDate</text>
  <text x="1440" y="860" class="attribute">PickupTime</text>
  <text x="1440" y="875" class="attribute">DeliveryTime</text>
  <text x="1440" y="890" class="attribute">Status</text>
  <text x="1440" y="905" class="attribute">Notes</text>
  <text x="1440" y="920" class="attribute">CreatedDate</text>
  <text x="1440" y="935" class="attribute">UpdatedDate</text>
  
  <!-- Relationships -->
  <!-- Users to UserProfiles (1:1) -->
  <line x1="250" y1="180" x2="300" y2="170" class="relationship"/>
  <text x="275" y="170" class="relationship-label">1:1</text>
  
  <!-- Users to Vendors (1:1) -->
  <line x1="250" y1="200" x2="530" y2="180" class="relationship"/>
  <text x="390" y="185" class="relationship-label">1:1</text>
  
  <!-- Users to Orders (1:N) -->
  <line x1="150" y1="350" x2="150" y2="400" class="relationship"/>
  <text x="160" y="375" class="relationship-label">1:N</text>
  
  <!-- Vendors to MenuItems (1:N) -->
  <line x1="710" y1="180" x2="990" y2="180" class="relationship"/>
  <text x="850" y="170" class="relationship-label">1:N</text>
  
  <!-- Categories to MenuItems (1:N) -->
  <line x1="940" y1="170" x2="990" y2="170" class="relationship"/>
  <text x="965" y="160" class="relationship-label">1:N</text>
  
  <!-- Orders to OrderItems (1:N) -->
  <line x1="250" y1="560" x2="300" y2="510" class="relationship"/>
  <text x="275" y="530" class="relationship-label">1:N</text>
  
  <!-- MenuItems to OrderItems (1:N) -->
  <line x1="990" y1="350" x2="480" y2="500" class="relationship"/>
  <text x="735" y="420" class="relationship-label">1:N</text>
  
  <!-- Orders to Payments (1:N) -->
  <line x1="250" y1="600" x2="530" y2="520" class="relationship"/>
  <text x="390" y="555" class="relationship-label">1:N</text>
  
  <!-- Users to UserCredits (1:1) -->
  <line x1="250" y1="300" x2="760" y2="490" class="relationship"/>
  <text x="505" y="390" class="relationship-label">1:1</text>
  
  <!-- UserCredits to CreditHistory (1:N) -->
  <line x1="940" y1="490" x2="990" y2="510" class="relationship"/>
  <text x="965" y="495" class="relationship-label">1:N</text>
  
  <!-- Orders to Reviews (1:N) -->
  <line x1="250" y1="650" x2="1220" y2="520" class="relationship"/>
  <text x="735" y="580" class="relationship-label">1:N</text>
  
  <!-- Users to Notifications (1:N) -->
  <line x1="150" y1="350" x2="370" y2="760" class="relationship"/>
  <text x="260" y="555" class="relationship-label">1:N</text>
  
  <!-- Users to UserPreferences (1:1) -->
  <line x1="150" y1="350" x2="600" y2="760" class="relationship"/>
  <text x="375" y="555" class="relationship-label">1:1</text>
  
  <!-- Legend -->
  <rect x="50" y="1050" width="300" height="120" class="legend"/>
  <text x="200" y="1070" class="entity-title">Legend</text>
  <text x="60" y="1090" class="pk">Primary Key (PK)</text>
  <text x="60" y="1105" class="fk">Foreign Key (FK)</text>
  <text x="60" y="1120" class="attribute">Regular Attribute</text>
  <text x="60" y="1135" class="relationship-label">1:1 = One-to-One Relationship, 1:N = One-to-Many Relationship</text>
  <text x="60" y="1150" class="legend-text">Complete features include: User Management, Merchant Management, Menu Management, Order Management, Payment System, Review & Feedback, Notification System, Delivery Management, etc.</text>
  
</svg>