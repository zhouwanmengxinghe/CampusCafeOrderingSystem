@using Microsoft.AspNetCore.Identity
@inject SignInManager<IdentityUser> SignInManager
@inject UserManager<IdentityUser> UserManager
        @{
    var user = User.Identity;
    string role = User.IsInRole("Admin") ? "Admin"
                : User.IsInRole("Vendor") ? "Vendor"
                : "Customer";
        }
        <!DOCTYPE html>
        <html lang="en">
        <head>
            <meta charset="utf-8" />
            <meta name="viewport" content="width=device-width, initial-scale=1.0" />
            <title>@ViewData["Title"] - CampusCafeOrderingSystem</title>
            <link rel="stylesheet" href="~/lib/bootstrap/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    @await RenderSectionAsync("Styles", required: false)
            <style>
                body {
                    background-color: #F9F9F9;
                    color: #333;
                    font-family: 'Segoe UI', sans-serif;
                }

                .navbar {
                    background-color: #4CAF50;
                }

                    .navbar .navbar-brand {
                        color: white !important;
                        font-weight: 700;
                        font-size: 1.4rem;
                    }

                    .navbar .nav-link {
                        color: white !important;
                        font-weight: 500;
                        padding: 8px 15px;
                        border-radius: 6px;
                        transition: background-color 0.3s ease, box-shadow 0.2s ease;
                    }

                        .navbar .nav-link:hover {
                            background-color: #66BB6A;
                            color: white !important;
                            box-shadow: 0 3px 8px rgba(0,0,0,0.15);
                        }

                footer {
                    background-color: #4CAF50;
                    color: white;
                    padding: 1rem 0;
                    margin-top: 40px;
                }

                    footer a {
                        color: #C8E6C9;
                        text-decoration: none;
                    }

                        footer a:hover {
                            color: white;
                            text-decoration: underline;
                        }

                .btn-primary {
                    background-color: #4CAF50;
                    border-color: #4CAF50;
                }

                    .btn-primary:hover {
                        background-color: #45A049;
                        border-color: #45A049;
                    }
            </style>
        </head>
        <body>
            <header>
                <nav class="navbar navbar-expand-lg navbar-dark">
                    <div class="container-fluid">
                        <a class="navbar-brand" asp-controller="Home" asp-action="Index">CampusCafe</a>
                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMain"
                                aria-controls="navbarMain" aria-expanded="false" aria-label="Toggle navigation">
                            <span class="navbar-toggler-icon"></span>
                        </button>
                        <div class="collapse navbar-collapse" id="navbarMain">
                            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                                @if (SignInManager.IsSignedIn(User))
                        {
                            if (role == "Customer")
                            {
                                <li class="nav-item"><a class="nav-link" asp-controller="Menu" asp-action="Index">View Menu</a></li>
                                <li class="nav-item"><a class="nav-link" asp-controller="Cart" asp-action="Index">My Cart</a></li>
                                <li class="nav-item dropdown">
                                    <a class="nav-link dropdown-toggle" href="#" id="userDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                                        My Account
                                    </a>
                                    <ul class="dropdown-menu" aria-labelledby="userDropdown">
                                        <li><a class="dropdown-item" asp-controller="User" asp-action="Index">Dashboard</a></li>
                                        <li><a class="dropdown-item" asp-controller="User" asp-action="Profile">Profile</a></li>
                                        <li><a class="dropdown-item" asp-controller="User" asp-action="Preferences">Preferences</a></li>
                                        <li><a class="dropdown-item" asp-controller="User" asp-action="History">Order History</a></li>
                                        <li><a class="dropdown-item" asp-controller="User" asp-action="Credits">Credits</a></li>
                                        <li><hr class="dropdown-divider"></li>
                                        <li><a class="dropdown-item" asp-controller="Order" asp-action="MyOrders">My Orders</a></li>
                                    </ul>
                                </li>
                                <li class="nav-item"><a class="nav-link" asp-controller="Support" asp-action="Index">Help & Support</a></li>
                            }
                            else if (role == "Vendor")
                            {
                                <li class="nav-item"><a class="nav-link" asp-controller="Merchant" asp-action="Index">Home</a></li>
                                <li class="nav-item"><a class="nav-link" asp-controller="Merchant" asp-action="Dashboard">Dashboard</a></li>
                                <li class="nav-item"><a class="nav-link" asp-controller="Merchant" asp-action="MenuManagement">Menu</a></li>
                                <li class="nav-item"><a class="nav-link" asp-controller="Merchant" asp-action="OrderManagement">Orders</a></li>
                                <li class="nav-item"><a class="nav-link" asp-controller="Merchant" asp-action="Reports">Reports</a></li>
                                <li class="nav-item"><a class="nav-link" asp-controller="Merchant" asp-action="ReviewManagement">Reviews</a></li>
                            }
                            else if (role == "Admin")
                            {
                                <li class="nav-item"><a class="nav-link" asp-controller="Admin" asp-action="Orders">Order Management</a></li>
                                <li class="nav-item"><a class="nav-link" asp-controller="Admin" asp-action="MenuManagement">Menu Management</a></li>
                                <li class="nav-item"><a class="nav-link" asp-controller="Admin" asp-action="ManageUsers">User Management</a></li>
                                <li class="nav-item"><a class="nav-link" asp-controller="Admin" asp-action="Vendors">Vendor Management</a></li>
                                <li class="nav-item"><a class="nav-link" asp-controller="Admin" asp-action="Reports">Reports</a></li>
                                <li class="nav-item"><a class="nav-link" asp-controller="Admin" asp-action="ReviewCenter">Review Center</a></li>
                                <li class="nav-item"><a class="nav-link" asp-controller="Admin" asp-action="Settings">Settings</a></li>
                            }
                        }
                            </ul>
                            <partial name="_LoginPartial" />
                        </div>
                    </div>
                </nav>
            </header>

            <div class="container">
                <main role="main" class="pb-3">
                    @RenderBody()
                </main>
            </div>

            <footer class="text-center">
                <div class="container">
                    Group 12 - Campus Ordering System &copy; 2025 | <a asp-controller="Home" asp-action="Privacy">Privacy Policy</a>
                </div>
            </footer>

            <script src="~/lib/jquery/dist/jquery.min.js"></script>
            <script src="~/lib/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
            <script src="~/js/site.js" asp-append-version="true"></script>



            @await RenderSectionAsync("Scripts", required: false)
        </body>
    </html>
