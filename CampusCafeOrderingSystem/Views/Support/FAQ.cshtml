@model List<CampusCafeOrderingSystem.Controllers.FAQItem>
@{
    ViewData["Title"] = "Frequently Asked Questions";
}

<div class="container mt-4">
    <div class="row">
        <div class="col-md-12">
            <h1 class="text-center mb-4">Frequently Asked Questions</h1>
            <p class="text-center text-muted mb-5">Find answers to the most common questions about our service.</p>
        </div>
    </div>

    <div class="row">
        <div class="col-md-3">
            <div class="list-group" id="faq-categories">
                <a href="#all" class="list-group-item list-group-item-action active" data-category="all">All Questions</a>
                @foreach (var category in Model.Select(f => f.Category).Distinct())
                {
                    <a href="#@category.ToLower().Replace(" ", "-")" class="list-group-item list-group-item-action" data-category="@category">@category</a>
                }
            </div>
        </div>
        
        <div class="col-md-9">
            <div class="accordion" id="faqAccordion">
                @for (int i = 0; i < Model.Count; i++)
                {
                    var faq = Model[i];
                    <div class="accordion-item faq-item" data-category="@faq.Category">
                        <h2 class="accordion-header" id="heading@(i)">
                            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapse@(i)" aria-expanded="false" aria-controls="collapse@(i)">
                                <span class="badge bg-secondary me-2">@faq.Category</span>
                                @faq.Question
                            </button>
                        </h2>
                        <div id="collapse@(i)" class="accordion-collapse collapse" aria-labelledby="heading@(i)" data-bs-parent="#faqAccordion">
                            <div class="accordion-body">
                                @faq.Answer
                            </div>
                        </div>
                    </div>
                }
            </div>
        </div>
    </div>

    <div class="row mt-5">
        <div class="col-md-12 text-center">
            <div class="card bg-light">
                <div class="card-body">
                    <h5>Didn't find what you're looking for?</h5>
                    <p class="text-muted">Contact our support team for personalized assistance.</p>
                    <a asp-action="Contact" class="btn btn-primary me-2">Contact Us</a>
                    <a asp-action="Feedback" class="btn btn-outline-primary">Submit Feedback</a>
                </div>
            </div>
        </div>
    </div>
</div>

@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const categoryLinks = document.querySelectorAll('#faq-categories .list-group-item');
            const faqItems = document.querySelectorAll('.faq-item');

            categoryLinks.forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    
                    // Update active category
                    categoryLinks.forEach(l => l.classList.remove('active'));
                    this.classList.add('active');
                    
                    const selectedCategory = this.getAttribute('data-category');
                    
                    // Filter FAQ items
                    faqItems.forEach(item => {
                        if (selectedCategory === 'all' || item.getAttribute('data-category') === selectedCategory) {
                            item.style.display = 'block';
                        } else {
                            item.style.display = 'none';
                        }
                    });
                });
            });
        });
    </script>
}